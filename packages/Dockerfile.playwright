FROM mcr.microsoft.com/playwright:v1.44.0-jammy

WORKDIR /app/api

COPY api/package.json api/yarn.lock ./

RUN yarn install --frozen-lockfile
RUN npx playwright install --with-deps

COPY api ./
COPY public ../public

RUN yarn build

EXPOSE 3000